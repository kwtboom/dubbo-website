<!doctype html><html lang=zh class=no-js><head><meta name=ROBOTS content="INDEX, FOLLOW"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel="shortcut icon" type=image/png href=/imgs/favicon.png><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=manifest href=/manifest.webmanifest><title>根据请求参数引导流量分布 | Apache Dubbo</title><meta property="og:title" content="根据请求参数引导流量分布"><meta property="og:description" content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><meta property="og:type" content="article"><meta property="og:url" content="http://static.dubbo.apache.org:8080/zh/overview/tasks/traffic-management/arguments/"><meta property="article:section" content="overview"><meta property="article:modified_time" content="2023-01-02T14:16:32+08:00"><meta property="og:site_name" content="Apache Dubbo"><meta itemprop=name content="根据请求参数引导流量分布"><meta itemprop=description content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><meta itemprop=dateModified content="2023-01-02T14:16:32+08:00"><meta itemprop=wordCount content="156"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="根据请求参数引导流量分布"><meta name=twitter:description content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-112489517-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel=preload href=/scss/main.min.209e23d05c00cd0efb0dc9daf65a7d29491c7e1c8f21c8ec76798fe1e0a467a9.css as=style><link href=/scss/main.min.209e23d05c00cd0efb0dc9daf65a7d29491c7e1c8f21c8ec76798fe1e0a467a9.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3><meta name=theme-color content="#326ce5"><link rel=stylesheet href=/css/feature-states.css><meta name=description content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><meta property="og:description" content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><meta name=twitter:description content="根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。
或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。
开始之前 部署 Shop 商城项目 部署并打开 Dubbo Admin 任务详情 为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。
回到商城登录页面，我们以 VIP 用户 dubbo 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？
哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 dubbo 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。
为 VIP 用户提供稳定的特价商品服务 Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 org.apache.dubbo.samples.DetailService 服务提供，DetailService 显示商品详情的 getItem 方法定义如下，第二个参数为用户名。
public interface DetailService { Item getItem(long sku, String username); } 因此，接下来我们就为 DetailService 服务的 getItem 方法增加参数路由规则，如果用户参数是 dubbo 就转发到 v2 版本的服务。"><meta property="og:url" content="http://static.dubbo.apache.org:8080/zh/overview/tasks/traffic-management/arguments/"><meta property="og:title" content="根据请求参数引导流量分布"><meta name=twitter:title content="根据请求参数引导流量分布"><meta name=twitter:image:alt content="Apache Dubbo"><meta property="og:image" content="/images/kubernetes-horizontal-color.png"><meta property="og:type" content="article"><script async defer src=/js/github-buttons.js></script>
<link href=/css/community.css rel=stylesheet><link href=/css/contactus.css rel=stylesheet><script src=/js/script.js></script><title>根据请求参数引导流量分布 | Apache Dubbo</title></head><body class="td-page td-documentation"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar" data-auto-burger=primary><a class=navbar-brand href=/zh/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Apache Dubbo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/overview/home/><span>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/blog/><span>博客</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/contact/><span>联系社区</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/download/><span>版本发布</span></a></li><li class="nav-item dropdown d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdownMenuLink role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav><section class="header-hero text-white pb-4 light-text"><h1>根据请求参数引导流量分布</h1></section></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-md-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-zhoverview-li><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewhome-li><a href=/zh/overview/home/ title="Dubbo 文档" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewhome><span>主页</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewquickstart-li><a href=/zh/overview/quickstart/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewquickstart><span>入门</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewquickstartjava-li><a href=/zh/overview/quickstart/java/ title="Java 微服务开发入门" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewquickstartjava><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewquickstartgo-li><a href=/zh/overview/quickstart/go/ title="Go 微服务开发入门" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewquickstartgo><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewquickstartrust-li><a href=/zh/overview/quickstart/rust/ title="Rust 微服务开发入门" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewquickstartrust><span>Rust</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewquickstartnodejs-li><a href=/zh/overview/quickstart/nodejs/ title="Node.js 微服务开发入门" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewquickstartnodejs><span>Node.js</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewwhat-li><a href=/zh/overview/what/ title="Dubbo 介绍" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewwhat><span>介绍</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatoverview-li><a href=/zh/overview/what/overview/ title="了解 Dubbo 核心概念和架构" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatoverview><span>概念与架构</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatxyz-difference-li><a href=/zh/overview/what/xyz-difference/ title="与 gRPC、Spring Cloud、Istio 的关系" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatxyz-difference><span>与 gRPC、Spring Cloud、Istio 关系</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewwhatadvantages-li><a href=/zh/overview/what/advantages/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewwhatadvantages><span>核心优势</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatadvantagesusability-li><a href=/zh/overview/what/advantages/usability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatadvantagesusability><span>快速易用</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatadvantagesperformance-li><a href=/zh/overview/what/advantages/performance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatadvantagesperformance><span>超高性能</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatadvantagesgovernance-li><a href=/zh/overview/what/advantages/governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatadvantagesgovernance><span>服务治理</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewwhatadvantagesproduction-ready-li><a href=/zh/overview/what/advantages/production-ready/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewwhatadvantagesproduction-ready><span>生产环境验证</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewcore-features-li><a href=/zh/overview/core-features/ title=核心特性 class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewcore-features><span>功能</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresservice-definition-li><a href=/zh/overview/core-features/service-definition/ title="Dubbo 微服务开发" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresservice-definition><span>微服务开发</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresservice-discovery-li><a href=/zh/overview/core-features/service-discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresservice-discovery><span>服务发现</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresload-balance-li><a href=/zh/overview/core-features/load-balance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresload-balance><span>负载均衡</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewcore-featurestraffic-li><a href=/zh/overview/core-features/traffic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewcore-featurestraffic><span>流量管控</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featurestrafficcondition-rule-li><a href=/zh/overview/core-features/traffic/condition-rule/ title=条件路由规则 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featurestrafficcondition-rule><span>条件路由</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featurestraffictag-rule-li><a href=/zh/overview/core-features/traffic/tag-rule/ title=标签路由规则 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featurestraffictag-rule><span>标签路由</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featurestrafficscript-rule-li><a href=/zh/overview/core-features/traffic/script-rule/ title=脚本路由规则 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featurestrafficscript-rule><span>脚本路由</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featurestrafficconfiguration-rule-li><a href=/zh/overview/core-features/traffic/configuration-rule/ title=动态配置规则 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featurestrafficconfiguration-rule><span>动态配置</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featurestrafficmesh-rule-li><a href=/zh/overview/core-features/traffic/mesh-rule/ title=基于服务网格的路由规则 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featurestrafficmesh-rule><span>服务网格</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresprotocols-li><a href=/zh/overview/core-features/protocols/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresprotocols><span>通信协议</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresextensibility-li><a href=/zh/overview/core-features/extensibility/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresextensibility><span>扩展适配</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresobservability-li><a href=/zh/overview/core-features/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresobservability><span>观测服务</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuressecurity-li><a href=/zh/overview/core-features/security/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuressecurity><span>认证鉴权</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresservice-mesh-li><a href=/zh/overview/core-features/service-mesh/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresservice-mesh><span>服务网格</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresecosystem-li><a href=/zh/overview/core-features/ecosystem/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresecosystem><span>微服务生态</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewcore-featuresmore-li><a href=/zh/overview/core-features/more/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewcore-featuresmore><span>更多高级功能</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-zhoverviewtasks-li><a href=/zh/overview/tasks/ title="跟随示例任务学习 Dubbo" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasks><span>任务</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksdevelop-li><a href=/zh/overview/tasks/develop/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksdevelop><span>开发服务</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdeveloptemplate-li><a href=/zh/overview/tasks/develop/template/ title=通过模板生成项目脚手架 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdeveloptemplate><span>生成项目</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopservice_reference-li><a href=/zh/overview/tasks/develop/service_reference/ title="发布和调用 Dubbo 服务" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopservice_reference><span>发布和调用</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopasync-li><a href=/zh/overview/tasks/develop/async/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopasync><span>异步调用</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopversion_group-li><a href=/zh/overview/tasks/develop/version_group/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopversion_group><span>版本与分组</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopcontext-li><a href=/zh/overview/tasks/develop/context/ title=上下文参数传递 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopcontext><span>上下文参数</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopgeneric-li><a href=/zh/overview/tasks/develop/generic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopgeneric><span>泛化调用</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewtasksdevelopprotocols-li><a href=/zh/overview/tasks/develop/protocols/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksdevelopprotocols><span>通信协议</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewtasksdevelopprotocolstriple-li><a href=/zh/overview/tasks/develop/protocols/triple/ title="Dubbo3 通信协议 -- Triple" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksdevelopprotocolstriple><span>Triple 协议</span></a><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolstripleidl-li><a href=/zh/overview/tasks/develop/protocols/triple/idl/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolstripleidl><span>使用 IDL + Protobuf 跨语言定义服务</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolstriplewrap-li><a href=/zh/overview/tasks/develop/protocols/triple/wrap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolstriplewrap><span>Pojo 序列化兼容模式</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolstriplestreaming-li><a href=/zh/overview/tasks/develop/protocols/triple/streaming/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolstriplestreaming><span>Streaming 通信模式</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolsdubbo2-li><a href=/zh/overview/tasks/develop/protocols/dubbo2/ title="基于 HTTP 的通信协议" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolsdubbo2><span>HTTP 协议</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolshttp-li><a href=/zh/overview/tasks/develop/protocols/http/ title="基于 TCP 的 RPC 通信协议" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolshttp><span>Dubbo2 协议</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdevelopprotocolsgrpc-li><a href=/zh/overview/tasks/develop/protocols/grpc/ title="gRPC 通信协议" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdevelopprotocolsgrpc><span>gRPC 协议</span></a></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksdeploy-li><a href=/zh/overview/tasks/deploy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksdeploy><span>部署服务</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdeploydeploy-on-vm-li><a href=/zh/overview/tasks/deploy/deploy-on-vm/ title="部署 Dubbo 应用到传统虚拟机环境" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdeploydeploy-on-vm><span>部署到虚拟机</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdeploydeploy-on-docker-li><a href=/zh/overview/tasks/deploy/deploy-on-docker/ title="部署 Dubbo 应用到 Docker 环境" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdeploydeploy-on-docker><span>部署到 Docker</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksdeploydeploy-on-k8s-li><a href=/zh/overview/tasks/deploy/deploy-on-k8s/ title="部署 Dubbo 应用到 Kubernetes 环境" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksdeploydeploy-on-k8s><span>部署到 Kubernetes</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-zhoverviewtaskstraffic-management-li><a href=/zh/overview/tasks/traffic-management/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtaskstraffic-management><span>流量管控</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementtimeout-li><a href=/zh/overview/tasks/traffic-management/timeout/ title=动态调整服务超时时间 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementtimeout><span>调整超时时间</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementretry-li><a href=/zh/overview/tasks/traffic-management/retry/ title=通过重试提高服务调用成功率 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementretry><span>服务重试</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementaccesslog-li><a href=/zh/overview/tasks/traffic-management/accesslog/ title=通过动态开启访问日志跟踪服务调用情况 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementaccesslog><span>访问日志</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementregion-li><a href=/zh/overview/tasks/traffic-management/region/ title=同机房/区域优先 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementregion><span>同区域优先</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementisolation-li><a href=/zh/overview/tasks/traffic-management/isolation/ title=通过标签实现流量隔离环境（灰度、多套开发环境等） class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementisolation><span>环境隔离</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementarguments-li><a href=/zh/overview/tasks/traffic-management/arguments/ title=根据请求参数引导流量分布 class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementarguments><span class=td-sidebar-nav-active-item>参数路由</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementweight-li><a href=/zh/overview/tasks/traffic-management/weight/ title=基于权重值的比例流量转发 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementweight><span>权重比例</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementmock-li><a href=/zh/overview/tasks/traffic-management/mock/ title=在大促之前对弱依赖调用进行服务降级 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementmock><span>服务降级</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhoverviewtaskstraffic-managementhost-li><a href=/zh/overview/tasks/traffic-management/host/ title="将流量点对点引导到一台机器 (如排查问题)" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtaskstraffic-managementhost><span>固定机器导流</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksecosystem-li><a href=/zh/overview/tasks/ecosystem/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksecosystem><span>微服务生态</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksecosystemtransaction-li><a href=/zh/overview/tasks/ecosystem/transaction/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksecosystemtransaction><span>事务管理</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksecosystemrate-limit-li><a href=/zh/overview/tasks/ecosystem/rate-limit/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksecosystemrate-limit><span>限流降级</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksecosystemconfiguration-li><a href=/zh/overview/tasks/ecosystem/configuration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksecosystemconfiguration><span>配置管理</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksobservability-li><a href=/zh/overview/tasks/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksobservability><span>观测服务</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksobservabilityadmin-li><a href=/zh/overview/tasks/observability/admin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksobservabilityadmin><span>Admin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksobservabilitygrafana-li><a href=/zh/overview/tasks/observability/grafana/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksobservabilitygrafana><span>Grafana</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksobservabilityprometheus-li><a href=/zh/overview/tasks/observability/prometheus/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksobservabilityprometheus><span>Prometheus</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksextensibility-li><a href=/zh/overview/tasks/extensibility/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksextensibility><span>自定义扩展</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksextensibilityextensibility-li><a href=/zh/overview/tasks/extensibility/extensibility/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksextensibilityextensibility><span>Filter</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewtasksmesh-li><a href=/zh/overview/tasks/mesh/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmesh><span>服务网格</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewtasksmeshbookinfo-sidecar-li><a href=/zh/overview/tasks/mesh/bookinfo-sidecar/ title="Envoy Bookinfo 示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-sidecar><span>Envoy Bookinfo</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshbookinfo-sidecartraffic-li><a href=/zh/overview/tasks/mesh/bookinfo-sidecar/traffic/ title="Envoy Bookinfo 流量管控示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-sidecartraffic><span>Traffic Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshbookinfo-sidecarsecurity-li><a href=/zh/overview/tasks/mesh/bookinfo-sidecar/security/ title="Envoy Bookinfo 认证鉴权示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-sidecarsecurity><span>security</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewtasksmeshbookinfo-proxyless-li><a href=/zh/overview/tasks/mesh/bookinfo-proxyless/ title="Proxyless Bookinfo 示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-proxyless><span>Proxyless Bookinfo</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshbookinfo-proxylesstraffic-li><a href=/zh/overview/tasks/mesh/bookinfo-proxyless/traffic/ title="Envoy Bookinfo 流量管控示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-proxylesstraffic><span>Traffic Management</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshbookinfo-proxylesssecurity-li><a href=/zh/overview/tasks/mesh/bookinfo-proxyless/security/ title="Envoy Bookinfo 认证鉴权示例" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshbookinfo-proxylesssecurity><span>security</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id=m-zhoverviewtasksmeshmigration-li><a href=/zh/overview/tasks/mesh/migration/ title="传统 Dubbo 微服务集群如何平滑迁移到 Istio 服务网格体系" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewtasksmeshmigration><span>迁移到服务网格</span></a><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshmigrationdubbo-mesh-li><a href=/zh/overview/tasks/mesh/migration/dubbo-mesh/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksmeshmigrationdubbo-mesh><span>地址同步</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshmigrationdeploy-on-k8s-li><a href=/zh/overview/tasks/mesh/migration/deploy-on-k8s/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksmeshmigrationdeploy-on-k8s><span>协议识别</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewtasksmeshmigrationproxyless-li><a href=/zh/overview/tasks/mesh/migration/proxyless/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewtasksmeshmigrationproxyless><span>其他问题？</span></a></li></ul></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-zhoverviewmannual-li><a href=/zh/overview/mannual/ title="SDK 用户手册" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-zhoverviewmannual><span>SDK</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewmannualjava-li><a href=/zh/docs3-v2/java-sdk/home/ title="Java SDK" target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewmannualjava><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewmannualgolang-li><a href=/zh/docs3-v2/golang-sdk/ title="Golang SDK" target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewmannualgolang><span>Golang</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-zhoverviewmannualrust-li><a href=/zh/docs3-v2/rust-sdk/ title="Rust SDK" target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhoverviewmannualrust><span>Rust</span></a></li></ul></li></ul></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=http://static.dubbo.apache.org:8080/zh/overview/>文档</a></li><li class=breadcrumb-item><a href=http://static.dubbo.apache.org:8080/zh/overview/tasks/>任务</a></li><li class=breadcrumb-item><a href=http://static.dubbo.apache.org:8080/zh/overview/tasks/traffic-management/>流量管控</a></li><li class="breadcrumb-item active" aria-current=page><a href=http://static.dubbo.apache.org:8080/zh/overview/tasks/traffic-management/arguments/ aria-disabled=true class="btn-link disabled">参数路由</a></li></ol></nav><div class=td-content><h1>根据请求参数引导流量分布</h1><header class=article-meta></header><p>根据请求参数值转发流量，是一种非常灵活且实用的流量管控策略。比如微服务实践中，根据参数（如用户 ID）路由流量，将一小部分用户请求转发到最新发布的产品版本，以验证新版本的稳定性、获取用户的产品体验反馈等，是生产实践中常用的一种有效的灰度机制。</p><p>或者，有些产品提供差异化的付费服务，需要根据请求参数中的用户 ID 将请求路由到具有不同服务等级保障的集群，就像接下来我们在示例任务中所做的那样。</p><h2 id=开始之前>开始之前</h2><ul><li><a href=../#%E9%83%A8%E7%BD%B2%E5%95%86%E5%9C%BA%E7%B3%BB%E7%BB%9F>部署 Shop 商城项目</a></li><li>部署并打开 <a href>Dubbo Admin</a></li></ul><h2 id=任务详情>任务详情</h2><p>为了增加用户粘性，我们为商城示例系统新增了 VIP 用户服务，现在商城有两类用户：普通用户和 VIP 用户，其中 VIP 用户可以看到比普通用户更低的商品价格。</p><p>回到商城登录页面，我们以 VIP 用户 <code>dubbo</code> 登录系统，是否看到如下图所示的 VIP 专属商品价格，多刷新几次商品页面那？</p><p><img src=/imgs/v3/tasks/arguments/arguments1.png alt=arguments1></p><p>哦，是不是价格忽高忽低？！这是因为在当前部署的示例系统中，只有 detail v2 版本才能识别 VIP 用户并提供特价服务，因此，我们要确保 <code>dubbo</code> 用户始终访问 detail v2 实例，以便享受稳定的 VIP 服务。</p><p><img src=/imgs/v3/tasks/arguments/arguments2.png alt=arguments2></p><h3 id=为-vip-用户提供稳定的特价商品服务>为 VIP 用户提供稳定的特价商品服务</h3><p>Detail v2 版本能够识别 VIP 用户并在商品详情中展示特价。商品详情服务由 Detail 应用中的 <code>org.apache.dubbo.samples.DetailService</code> 服务提供，<code>DetailService</code> 显示商品详情的 <code>getItem</code> 方法定义如下，第二个参数为用户名。</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#268bd2>public</span> <span style=color:#268bd2>interface</span> <span style=color:#268bd2>DetailService</span> <span style=color:#719e07>{</span>
</span></span><span style=display:flex><span>    Item <span style=color:#268bd2>getItem</span><span style=color:#719e07>(</span><span style=color:#dc322f>long</span> sku<span style=color:#719e07>,</span> String username<span style=color:#719e07>);</span>
</span></span><span style=display:flex><span><span style=color:#719e07>}</span>
</span></span></code></pre></div><p>因此，接下来我们就为 <code>DetailService</code> 服务的 <code>getItem</code> 方法增加参数路由规则，如果用户参数是 <code>dubbo</code> 就转发到 v2 版本的服务。</p><h4 id=操作步骤>操作步骤</h4><ol><li>打开 Dubbo Admin 控制台</li><li>在左侧导航栏选择【服务治理】 > 【参数路由】</li><li>点击 &ldquo;创建&rdquo; 按钮，输入。</li></ol><p><img src alt="Admin 参数路由设置截图"></p><p>方法参数的索引从 <code>0</code> 开始，我们上面填入 <code>1</code> 表示根据第二个参数进行流量转发。</p><h4 id=规则详解>规则详解</h4><p><strong>规则 key</strong> ：<code>org.apache.dubbo.samples.DetailService</code></p><p><strong>规则体</strong></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#268bd2>configVersion</span>: v3.0
</span></span><span style=display:flex><span><span style=color:#268bd2>key</span>: org.apache.dubbo.samples.DetailService
</span></span><span style=display:flex><span><span style=color:#268bd2>scope</span>: service
</span></span><span style=display:flex><span><span style=color:#268bd2>force</span>: <span style=color:#cb4b16>false</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>enabled</span>: <span style=color:#cb4b16>true</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>priority</span>: <span style=color:#2aa198>1</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>conditions</span>:
</span></span><span style=display:flex><span>  - method=getItem &amp; arguments[1]=dubbo =&gt; orderVersion=v2
</span></span></code></pre></div><ul><li><code>method=getItem & arguments[1]=dubbo</code> 表示流量规则匹配 <code>getItem</code> 方法调用的第二个参数，当参数值为 <code>dubbo</code> 时做进一步的地址子集筛选。</li><li><code>orderVersion=v2</code> 将过滤出所有带有 <code>orderVersion=v2</code> 标识的 URL 地址子集（在示例部署中，我们所有 detail v2 的实例都已经打上了 <code>orderVersion=v2</code> 标签）。</li></ul><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#268bd2>conditions</span>:
</span></span><span style=display:flex><span>  - method=getItem &amp; arguments[1]=dubbo =&gt; orderVersion=v2
</span></span></code></pre></div><p><code>force: false</code> 表示如果没有 <code>type=vip</code> 的地址，则随机访问所有可用地址。</p><h2 id=其他事项>其他事项</h2><p>本示例只是 Dubbo 条件路由的一种使用场景，除了根据方法名、参数匹配进行流量转发，条件路由还可以根据附加参数 Attachments、URL 中的数据等进行流量转发，同时匹配条件也支持范围、通配符等，比如：</p><ul><li>attachments[key]=hello*</li><li>arguments[0]=1~100</li><li>url_key=value</li></ul><p>更为灵活的是，条件路由的匹配条件支持扩展，用户可以自定义匹配条件的来源和格式，具体可参见 <a href>条件路由规则说明</a>。</p><div id=pre-footer><h2>[i18n] feedback_heading</h2><p class=feedback--prompt>[i18n] feedback_question</p><button class="btn btn-primary mb-4 feedback--yes">[i18n] feedback_yes</button>
<button class="btn btn-primary mb-4 feedback--no">[i18n] feedback_no</button><p class="feedback--response feedback--response__hidden">[i18n] layouts_docs_partials_feedback_thanks
<a target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/kubernetes>Stack Overflow</a>.
[i18n] layouts_docs_partials_feedback_issue
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">[i18n] layouts_docs_partials_feedback_problem</a>
[i18n] layouts_docs_partials_feedback_or
<a class=feedback--link target=_blank rel=noopener href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">[i18n] layouts_docs_partials_feedback_improvement</a>.</p></div><script>const yes=document.querySelector(".feedback--yes"),no=document.querySelector(".feedback--no");document.querySelectorAll(".feedback--link").forEach(e=>{e.href=e.href+window.location.pathname});const sendFeedback=e=>{gtag||console.log("!gtag"),gtag("event","click",{event_category:"Helpful",event_label:window.location.pathname,value:e})},disableButtons=()=>{yes.disabled=!0,yes.classList.add("feedback--button__disabled"),no.disabled=!0,no.classList.add("feedback--button__disabled")};yes.addEventListener("click",()=>{sendFeedback(1),disableButtons(),document.querySelector(".feedback--response").classList.remove("feedback--response__hidden")}),no.addEventListener("click",()=>{sendFeedback(0),disableButtons(),document.querySelector(".feedback--response").classList.remove("feedback--response__hidden")})</script><br><div class="text-muted mt-5 pt-3 border-top">[i18n] post_last_mod January 2, 2023: <a href=https://github.com/apache/dubbo-website/commit/f903d9c1fec1bfab498aab36d5b764f75a486746>Update docs, traffic management (#1797) (f903d9c1f)</a></div></div></main><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/apache/dubbo-website/edit/main/content/zh/overview/tasks/traffic-management/arguments.md target=_blank><i class="fa fa-edit fa-fw"></i> [i18n] post_edit_this</a>
<a href="https://github.com/apache/dubbo-website/new/main/content/zh/overview/tasks/traffic-management/arguments.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> [i18n] post_create_child_page</a>
<a href="https://github.com/apache/dubbo-website/issues/new?title=%e6%a0%b9%e6%8d%ae%e8%af%b7%e6%b1%82%e5%8f%82%e6%95%b0%e5%bc%95%e5%af%bc%e6%b5%81%e9%87%8f%e5%88%86%e5%b8%83" target=_blank><i class="fab fa-github fa-fw"></i> [i18n] post_create_issue</a>
<a href=https://github.com/apache/dubbo/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> [i18n] post_create_project_issue</a></div><nav id=TableOfContents><ul><li><a href=#开始之前>开始之前</a></li><li><a href=#任务详情>任务详情</a><ul><li><a href=#为-vip-用户提供稳定的特价商品服务>为 VIP 用户提供稳定的特价商品服务</a></li></ul></li><li><a href=#其他事项>其他事项</a></li></ul></nav></div></div></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dubbo mailing list archive" aria-label="Dubbo mailing list archive"><a class=text-white target=_blank rel="noopener noreferrer" href=https://lists.apache.org/list.html?dev@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/apache/dubbo><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Subscribe to mailing list" aria-label="Subscribe to mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=mailto:dev-subscribe@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation. [i18n] footer_all_rights_reserved</small></div></div></div></footer><div class="row pt-2 pb-2"><div class="container-fluid mx-sm-5"><div class=text-center id=my-footer><img style=float:left src=/imgs/apache_logo.png><ul><li><a href=https://www.apache.org>Foundation</a></li><li><a href=https://www.apache.org/licenses/>License</a></li><li><a href=https://www.apache.org/security/>Security</a></li><li><a href=https://www.apache.org/events/current-event>Events</a></li><li><a href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li><li><a href=https://privacy.apache.org/policies/privacy-policy-public.html>Privacy</a></li><li><a href=https://www.apache.org/foundation/thanks.html>Thanks</a></li></ul></div></div></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script src=/js/main.min.a5faf003454d52ae4e2fa290ba90fb3661ea7e329283ae3bf7cf0909f0960468.js integrity="sha256-pfrwA0VNUq5OL6KQupD7NmHqfjKSg647988JCfCWBGg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script>docsearch({appId:"L5F4T9F0I1",apiKey:"364ae307e1da9d02b2335675e9db1eb1",indexName:"apache_dubbo",container:"#docsearch",debug:!1}),docsearch({appId:"L5F4T9F0I1",apiKey:"364ae307e1da9d02b2335675e9db1eb1",indexName:"apache_dubbo",container:"#docsearch_zh_home",debug:!1})</script></body></html>